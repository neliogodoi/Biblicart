<div class="h-full flex flex-col p-2 md:p-4">
  <div class="flex items-center justify-between mb-3 flex-shrink-0">
    <h3 class="font-bold text-base md:text-lg text-gray-700">Palpites...</h3>
    <span class="text-[11px] md:text-xs text-gray-600 bg-gray-200 px-3 py-1 rounded-full font-semibold">
      Com {{ letterCount() || '-' }} letras
    </span>
  </div>

  <div #scrollContainer class="flex-1 min-h-[170px] max-h-[170px] overflow-y-auto space-y-3 pr-2 chat-messages">
    @for (guess of gameService.guesses(); track guess.id) {
      <div>
        @if (guess.isCorrect) {
          <p class="text-green-600 font-semibold p-2 bg-green-100 rounded-lg">
            <span class="font-bold">{{ guess.playerName }}</span> acertou a palavra!
          </p>
        } @else {
          <p class="text-gray-800">
            <span class="font-bold" [class.text-blue-600]="guess.playerId === gameService.user()?.uid">{{ guess.playerName }}:</span>
            <span class="ml-1 text-gray-700">{{ guess.text }}</span>
          </p>
        }
      </div>
    }
  </div>

  <form class="mt-4 flex-shrink-0" (ngSubmit)="submitGuess()">
    <div class="flex items-center gap-3 bg-white border border-gray-300 rounded-2xl px-3 py-2 shadow-sm">
      <input 
        type="text"
        [placeholder]="gameService.isDrawer() ? 'Você está desenhando...' : 'Digite seu palpite...'"
        [ngModel]="guessText()"
        (ngModelChange)="guessText.set($event)"
        [ngModelOptions]="{standalone: true}"
        [disabled]="gameService.isDrawer()"
        #guessInput
        class="flex-1 px-3 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#3A86FF] focus:border-transparent bg-gray-50 disabled:bg-gray-100 disabled:text-gray-500"
      />
      <button 
        type="submit"
        [disabled]="!guessText().trim() || gameService.isDrawer()"
        class="flex-shrink-0 w-12 h-12 rounded-full bg-gray-800 text-white font-semibold shadow disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700 transition-colors">
        OK
      </button>
    </div>
    @if(gameService.isDrawer()) {
      <p class="text-xs text-gray-500 mt-2 text-center">Você é o desenhista — aguarde os palpites.</p>
    }
  </form>
</div>
